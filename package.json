{
  "name": "politopicsweb",
  "version": "0.1.0",
  "private": true,
  "workspaces": ["frontend", "backend"],
  "scripts": {
    "// dev": "",
    "dev": "bash -c 'npm run dev:backend & npm run dev:frontend'",
    "dev:frontend": "npm --prefix frontend run dev:local",
    "dev:backend": "npm --prefix backend run dev:local",
    "dev:backend:mock": "cd backend && DISABLE_NOTIFICATIONS=true DATA_MODE=mock ACTIVE_ENVIRONMENT=local npm run dev",

    "// build": "",
    "build": "npm run build:frontend && npm run build:backend",
    "build:frontend": "npm --prefix frontend run build",
    "build:frontend:local": "npm --prefix frontend run build:local",
    "build:backend": "npm --prefix backend run build",
    "build:backend:local": "npm --prefix backend run build:local",

    "// lint": "",
    "lint": "npm run lint:frontend",
    "lint:frontend": "npm --prefix frontend run lint",

    "// r2 / worker": "",
    "r2:sync:local": "node scripts/r2-sync-local.mjs",
    "worker:dev:local": "npx --yes wrangler dev --local --env local --config wrangler.toml --port 8787 --ip 127.0.0.1",

    "// e2e": "",
    "setup:e2e": "npx playwright install && sudo env \"PATH=$PATH\" npx playwright install-deps",
    "e2e:prepare": "npm run build:frontend:local && npm run r2:sync:local",
    "test:e2e": "npm run e2e:prepare && npx playwright test",
    "test:e2e:quick": "npx playwright test",
    "test:e2e:backend": "npx playwright test tests/e2e/backend.spec.ts",
    "test:e2e:localstack": "bash scripts/test-e2e-localstack.sh",
    "r2:sync:local:fast": "bash scripts/r2-sync-bulk.sh",

    "// deploy": "",
    "deploy:localstack": "npm run build:backend:local && cd terraform && terraform apply -auto-approve -var-file=tfvars/localstack.tfvars",

    "// meta": "",
    "pretest": "bash scripts/ensure-localstack.sh",
    "test": "ACTIVE_ENVIRONMENT=localstackTest npm run test:e2e",
    "ensure:localstack": "bash scripts/ensure-localstack.sh"
  },
  "devDependencies": {
    "@playwright/test": "^1.51.1"
  }
}
